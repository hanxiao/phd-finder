<!DOCTYPE html>
<html xmlns:max-width="http://www.w3.org/1999/xhtml" xmlns:v-bind="http://www.w3.org/1999/xhtml"
      xmlns:v-on="http://www.w3.org/1999/xhtml">
<head>
    <!--
    Customize this policy to fit your own app's needs. For more guidance, see:
        https://github.com/apache/cordova-plugin-whitelist/blob/master/README.md#content-security-policy
    Some notes:
        * gap: is required only on iOS (when using UIWebView) and is needed for JS->native communication
        * https://ssl.gstatic.com is required only on Android and is needed for TalkBack to function properly
        * Disables use of inline scripts in order to mitigate risk of XSS vulnerabilities. To change this:
            * Enable inline JS: add 'unsafe-inline' to default-src
    -->
    <meta charset="utf-8">
    <meta name="viewport"
          content="width=device-width, initial-scale=1, maximum-scale=1, minimum-scale=1, user-scalable=no, minimal-ui">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black">
    <meta name="format-detection" content="telephone=no">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="viewport"
          content="user-scalable=no, initial-scale=1, maximum-scale=1, minimum-scale=1, width=device-width">
    <title>找德到</title>
    <link rel="stylesheet" href="lib/framework7/css/framework7.ios.min.css">
    <link rel="stylesheet" href="lib/framework7/css/framework7.ios.colors.min.css">
    <link rel="stylesheet" href="lib/css/animate.css">
    <link rel="stylesheet" href="lib/fontawesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="lib/css/chartist.min.css">
    <link rel="stylesheet" href="lib/css/welcomescreen.css">
    <!-- Path to your custom app styles-->
    <link rel="stylesheet" href="css/tabbar.css">
    <link rel="stylesheet" href="css/general.css">
    <link rel="stylesheet" href="css/card.css">
    <link rel="stylesheet" href="css/list.css">
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/invest.css">

</head>
<body id="all-positions">
<!-- We need to set "toolbar-through" class on it to keep space for our tab bar-->
<div class="views tabs toolbar-through">
    <!-- Your first view, it is also a .tab and should have "active" class to make it visible by default-->
    <div id="port-view" class="view view-main tab active">
        <!-- Pages-->
        <div class="navbar top-navbar">
            <div class="navbar-inner">
                <div class="center sliding">学术职位 (共{{totalSize}}个)</div>
                <div class="subnavbar">
                    <div class="buttons-row theme-white" id="langswitch-bar">
                        <div class="button tab-link" v-bind:class="{active: lang.id=='de'}"
                             onclick="translate2LocalData(curPositions, 'de')">德文
                        </div>
                        <div class="button tab-link" v-bind:class="{active: lang.id=='zh-cn'}"
                             onclick="translate2LocalData(curPositions, 'zh-cn')">中文
                        </div>
                        <div class="button tab-link" v-bind:class="{active: lang.id=='en-us'}"
                             onclick="translate2LocalData(curPositions, 'en-us')">英文
                        </div>
                    </div>
                    <a href="#" class="item-link smart-select">
                        <select multiple v-model="curTag" @change="changeFilter()">
                            <optgroup label="按职位过滤">
                                <option value="{{tag.key}}" v-for="tag in tagList | filterBy 'position' in 'type'">
                                    {{tag.short}}
                                </option>
                            </optgroup>
                            <optgroup label="按学科过滤">
                                <option value="{{tag.key}}" v-for="tag in tagList | filterBy 'subject' in 'type'">
                                    {{tag.short}}
                                </option>
                            </optgroup>
                        </select>

                        <div v-if="curTag.length==0" class="button filter-icon"><i class="fa fa-sliders"
                                                                                   aria-hidden="true"></i></div>
                        <div v-else class="button filter-icon" v-on:taphold="resetFilter()">
                            <span class="fa-stack">
                              <i class="fa fa-certificate subscript fa-spin" aria-hidden="true"></i>
                              <i class="fa fa-sliders fa-stack-1x"
                                 aria-hidden="true"></i>
                            </span>
                        </div>
                    </a>
                </div>
            </div>
        </div>

        <div class="pages navbar-through">
            <!-- Page, data-page contains page name-->
            <div data-page="index-1" class="page with-subnavbar">
                <!-- Scrollable page content-->
                <div class="page-content" id="my-portfolio">

                    <div class="content-block status-board">


                        <div class="list-block order-list media-list">
                            <ul>
                                <li data-popup=".popup-detail" class="open-popup swipeout"
                                    v-on:click="focusPosition=positions[$index]"
                                    v-for="pos in positions | orderBy 'publishTime' -1">
                                    <div class="swipeout-content" v-bind:class="{ favPosition: pos.isFav }">
                                        <a href="#" class="item-content item-link">
                                            <div class="item-inner">
                                                <div class="item-title-row">
                                                    <div class="item-title">{{pos.disTitle}}</div>
                                                    <div class="item-after">
                                                        {{renderVal(pos.publishTime,'date')}}
                                                    </div>
                                                </div>
                                                <div class="item-subtitle">
                                                    {{pos.disInstitute}}
                                                </div>
                                                <div class="uni-logo">
                                                    <img :src="'img/logo/'+ pos.instituteId +'.png'"
                                                         style="max-width:100%; max-height:100%;"
                                                         onError="imgError(this)">
                                                </div>
                                                <div class="item-text">
                                                    <ul class="tag-cloud">
                                                        <li class="fav-icon" v-if="pos.isFav"><i
                                                                class="fa fa-heart"></i></li>
                                                        <li v-for="tag in pos.tags">{{transTag(tag)}}</li>
                                                    </ul>
                                                    {{pos.summary}}
                                                </div>
                                            </div>
                                        </a>
                                    </div>

                                    <div v-if='pos.isFav' class="swipeout-actions-right">
                                        <a href="#" class="mark swipe-bg-color-del swipeout-overswipe"
                                           @click="closeAllSwipe(pos, false);">
                                            <i class="fa fa-trash-o"></i>&nbsp;删除
                                        </a>
                                    </div>
                                    <div v-else class="swipeout-actions-right">
                                        <a href="#" class="mark swipe-bg-color swipeout-overswipe"
                                           @click="closeAllSwipe(pos, true);">
                                            <i class="fa fa-heart"></i>&nbsp;收藏
                                        </a>
                                    </div>
                                </li>
                                <infinite-loading :on-infinite="onInfinite" :distance="distance"
                                                  v-if="positions.length < 500">
                                </infinite-loading>

                            </ul>

                        </div>
                        <div v-else>
                            <div class="embrass-tip">
                                <center>
                                    <i class="fa fa-meh-o" aria-hidden="true"></i>
                                    近期的职位都看过啦
                                </center>
                            </div>
                        </div>

                    </div>
                </div>
            </div>
        </div>
    </div>
    <!-- Second view (for second wrap)-->
    <div id="invest-view" class="view tab">
        <!-- We can make with view with navigation, let's add Top Navbar-->
        <div class="navbar top-navbar">
            <div class="navbar-inner">
                <div class="center sliding">收藏的职位</div>
                <div class="subnavbar">
                    <div class="buttons-row theme-white" id="langswitch-bar2">
                        <div class="button tab-link" v-bind:class="{active: lang.id=='de'}"
                             onclick="translate2LocalData(curPositions, 'de')">德文
                        </div>
                        <div class="button tab-link" v-bind:class="{active: lang.id=='zh-cn'}"
                             onclick="translate2LocalData(curPositions, 'zh-cn')">中文
                        </div>
                        <div class="button tab-link" v-bind:class="{active: lang.id=='en-us'}"
                             onclick="translate2LocalData(curPositions, 'en-us')">英文
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="pages navbar-through">
            <div data-page="strategy-store" class="page with-subnavbar">
                <div class="page-content smooth-scroll">
                    <div class="content-block status-board">
                        <div id="fav-positions">
                            <div v-if="favPositions.length>0">
                                <div class="list-block order-list media-list">
                                    <ul>
                                        <li data-popup=".popup-detail" class="open-popup swipeout"
                                            v-on:click="focusPosition=favPositions[$index]"
                                            v-for="pos in favPositions | orderBy 'publishTime' -1">
                                            <div class="swipeout-content" v-bind:class="{ favPosition: pos.isFav }">
                                                <a href="#" class="item-content item-link">
                                                    <div class="item-inner">
                                                        <div class="item-title-row">
                                                            <div class="item-title">{{pos.disTitle}}</div>
                                                            <div class="item-after">
                                                                {{renderVal(pos.publishTime,'date')}}
                                                            </div>
                                                        </div>
                                                        <div class="item-subtitle">
                                                            {{pos.disInstitute}}
                                                        </div>
                                                        <div class="uni-logo">
                                                            <img :src="'img/logo/'+ pos.instituteId +'.png'"
                                                                 style="max-width:100%; max-height:100%;"
                                                                 onError="imgError(this)">
                                                        </div>
                                                        <div class="item-text">
                                                            <ul class="tag-cloud">
                                                                <li class="fav-icon" v-if="pos.isFav"><i
                                                                        class="fa fa-heart"></i></li>
                                                                <li v-for="tag in pos.tags">{{transTag(tag)}}</li>
                                                            </ul>
                                                            {{pos.summary}}
                                                        </div>
                                                    </div>
                                                </a>
                                            </div>

                                            <div v-if='pos.isFav' class="swipeout-actions-right">
                                                <a href="#" class="mark swipe-bg-color-del swipeout-overswipe"
                                                   @click="closeAllSwipe(pos, false);">
                                                    <i class="fa fa-trash-o"></i>&nbsp;删除
                                                </a>
                                            </div>
                                        </li>
                                    </ul>

                                </div>
                            </div>
                            <div v-else>
                                <div class="embrass-tip">
                                    <center>
                                        <i class="fa fa-meh-o" aria-hidden="true"></i>
                                        你还没有收藏任何职位
                                    </center>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div id="profile-view" class="view tab">
        <!-- We can make with view with navigation, let's add Top Navbar-->
        <div class="navbar top-navbar">
            <div class="navbar-inner">
                <div class="center sliding">咨询</div>
            </div>
        </div>
        <div class="pages navbar-through">
            <div data-page="index-2" class="page">
                <div class="page-content smooth-scroll">
                    <div class="content-block">
                        <p>This is a second view. Lets, for example, have here some internal pages with navbar
                            navigation</p>
                    </div>
                    <div class="list-block">
                        <ul>
                            <li><a href="about.html" class="item-link">
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title">About Us</div>
                                    </div>
                                </div>
                            </a></li>
                            <li><a href="services.html" class="item-link">
                                <div class="item-content">
                                    <div class="item-inner">
                                        <div class="item-title">Services</div>
                                    </div>
                                </div>
                            </a></li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>


    <!-- Bottom Tabbar-->
    <div class="toolbar tabbar tabbar-labels">
        <div class="toolbar-inner">
            <a href="#port-view" class="tab-link active">
                <i class="icon">
                    <i class="fa fa-graduation-cap"></i>
                </i>
                <span class="tabbar-label">职位</span>
            </a>
            <a href="#invest-view" class="tab-link">
                <i class="icon">
                    <i class="fa fa-heart"></i>
                    <span v-if="favPositions.length >0" class="badge bg-green">{{favPositions.length}}</span>
                </i>

                <span class="tabbar-label">收藏</span>
            </a>
            <a href="#profile-view" class="tab-link">
                <i class="icon">
                    <i class="fa fa-comments-o"></i>
                </i>
                <span class="tabbar-label">咨询</span>
            </a>
            <a href="#profile-view" class="tab-link">
                <i class="icon">
                    <i class="fa fa-bars"></i>
                </i>
                <span class="tabbar-label">更多</span>
            </a>
        </div>
    </div>


</div>

<div class="popup popup-detail ">
    <div v-if="focusPosition" class="page toolbar-fixed navbar-fixed">
        <div class="page-content" id="detail-content">
            <div class="content-block">
                <p class="detail-title">{{focusPosition.disTitle}}</p>
            </div>
            <div class="content-block">
                <div class="uni-logo">
                    <img :src="'img/logo/'+ focusPosition.instituteId +'.png'"
                         style="max-width:100%; max-height:100%;"
                         onError="imgErrorHide(this)">
                </div>
                <p class="detail-uni">{{focusPosition.disInstitute}}</p>
                <ul class="tag-cloud">
                    <li class="fav-icon" v-if="focusPosition.isFav"><i
                            class="fa fa-heart"></i></li>
                    <li v-for="tag in focusPosition.tags">{{transTag(tag)}}</li>
                </ul>
            </div>
            <div class="content-block">
                <p class="detail-date">
                    {{renderVal(focusPosition.publishTime,'date')}} 于
                    {{renderVal(focusPosition.publishTime,'fulldate')}}</p>
            </div>
            <div class="card">
                <div class="card-content">
                    <div class="list-block">
                        <ul>
                            <li v-for="link in focusLinks">
                                <a v-bind:href="link" target="_blank" class="item-link item-content external">
                                    <div class="item-media">
                                        <i v-if="link.indexOf('mailto') !== -1" class="fa fa-envelope-o" aria-hidden="true"></i>
                                        <i v-else class="fa fa-link" aria-hidden="true"></i>
                                    </div>
                                    <div class="item-inner">
                                        <div class="item-title">{{link}}</div>
                                    </div>
                                </a>
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
            <!--<div class="content-block">
                <div align="center">
                    <script async src="//pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
                    &lt;!&ndash; inside-phdapp-detailpage &ndash;&gt;
                    <ins class="adsbygoogle"
                         style="display:inline-block;width:320px;height:100px"
                         data-ad-client="ca-pub-5408889511302651"
                         data-ad-slot="8872926327"></ins>
                    <script>
                        (adsbygoogle = window.adsbygoogle || []).push({});
                    </script>
                </div>
            </div>-->
            <div class="content-block inset">
                <div class="content-block-inner">
                    <p class="detail-main">{{{focusHtml}}}</p>
                </div>
            </div>
        </div>
        <div class="toolbar" v-bind:class="[focusPosition.isFav? 'fav-toolbar' : '']">
            <div class="toolbar-inner">
                <a href="#" class="link"><i class="fa fa-weixin" aria-hidden="true"></i>&nbsp;分享</a>
                <a href="#" v-if='focusPosition.isFav' @click="focusPosition.isFav=false">
                    <i class="fa fa-trash-o"></i>&nbsp;撤销收藏
                </a>
                <a v-else @click="focusPosition.isFav=true">
                    <i class="fa fa-heart"></i>&nbsp;收藏
                </a>
                <a href="#" class="link close-popup"><i class="fa fa-times-circle-o" aria-hidden="true"></i>&nbsp;关闭</a>
            </div>
        </div>
    </div>


</div>

<script type="text/javascript" src="cordova.js"></script>
<script type="text/javascript" src="lib/js/jquery-2.1.4.min.js"></script>
<!-- Path to Framework7 Library JS-->
<script type="text/javascript" src="lib/js/js.cookie.js"></script>
<script type="text/javascript" src="lib/js/jsonselect.js"></script>
<script type="text/javascript" src="lib/js/moment.js"></script>
<script type="text/javascript" src="lib/js/lz-string.min.js"></script>
<script type="text/javascript" src="lib/js/Chartist.min.js"></script>
<script type="text/javascript" src="lib/js/vue.js"></script>
<script type="text/javascript" src="lib/js/inobounce.js"></script>
<script type="text/javascript" src="lib/js/in-view.min.js"></script>
<script type="text/javascript" src="lib/js/accounting.min.js"></script>
<script type="text/javascript" src="lib/js/jquery.sparkline.min.js"></script>
<script type="text/javascript" src="lib/framework7/js/framework7.min.js"></script>
<script type="text/javascript" src="lib/js/welcomescreen.js"></script>
<script type="text/javascript" src="lib/js/vue-infinite-loading.js"></script>
<!-- Path to your app js-->
<script type="text/javascript" src="js/vars.js"></script>
<script type="text/javascript" src="js/data-render.js"></script>
<script type="text/javascript" src="js/data-loader.js"></script>
<script type="text/javascript" src="js/main.js"></script>
<script type="text/javascript" src="js/init-account.js"></script>
</body>
</html>
